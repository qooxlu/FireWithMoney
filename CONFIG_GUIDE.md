# FireWithMoney - 配置文件说明

## 配置文件结构

配置文件位于 `Config/bullet_config.yaml`，使用 YAML 格式。

### 配置格式

```yaml
bullets_default:
  # 原版子弹配置
  - id: 594              # 子弹物品ID（游戏内类型ID）
    name: "S弹 - 生锈弹"   # 子弹名称（用于文档说明）
    price: 1             # 每发子弹的价格
    display: true        # 是否在切换列表中显示

bullets_thirdparty:
  # 第三方模组子弹配置
  - id: 4300003
    name: "S-超压穿甲手枪弹"
    price: 186
    display: true
```

### 配置项说明

| 字段 | 类型 | 说明 |
|------|------|------|
| `id` | 整数 | 子弹的游戏内物品类型ID，必须唯一 |
| `name` | 字符串 | 子弹的显示名称（仅用于配置文件说明） |
| `price` | 整数 | 每发子弹的购买价格 |
| `display` | 布尔值 | 是否在 T 键弹药切换列表中显示 |

### 配置分类

- **bullets_default**: 原版游戏的子弹配置
  - S弹系列 (594, 595, 597, 598, 691)
  - AR弹系列 (603, 604, 606, 607, 694)
  - L弹系列 (612, 613, 615, 616, 698)
  - MAG弹系列 (640, 708, 709, 710)
  - 狙击弹系列 (621, 622, 700, 701, 702)
  - 霰弹系列 (630, 631, 633, 634, 707)
  - 箭矢 (648, 870, 871, 649)
  - 能量弹 (650, 1162, 918)
  - 火箭弹 (326)
  - 粑粑弹 (944)

- **bullets_thirdparty**: 第三方模组子弹配置
  - 鸭区突围 (4300xxx 系列)
  - J-lab扩展包 (20250xxx 系列)
  - T-7模组 (1380xxx 系列)

## 加载机制

1. **自动加载**: Mod 启动时自动从 `bullet_config.yaml` 加载配置
2. **后备配置**: 如果 YAML 加载失败，会使用硬编码的后备配置
3. **缓存系统**: 配置加载后会被缓存，无需重复读取文件

## 配置修改

### 如何修改价格

编辑 `bullet_config.yaml`，找到对应的子弹项，修改 `price` 值：

```yaml
- id: 597
  name: "S弹 - 穿甲弹"
  price: 30        # 修改这里的值
  display: true
```

### 如何隐藏子弹

将 `display` 设置为 `false`：

```yaml
- id: 1380411
  name: "S-特种爆破弹"
  price: 2080
  display: false   # 不在切换列表显示
```

### 如何添加新子弹

在对应的分类下添加新项：

```yaml
bullets_thirdparty:
  - id: 9999999
    name: "自定义超级子弹"
    price: 5000
    display: true
```

## 价格参考

- **生锈弹**: 1-5 价格
- **普通弹**: 5-35 价格
- **穿甲弹**: 30-126 价格
- **高级穿甲弹**: 84-360 价格
- **特种穿甲弹**: 144-1664 价格
- **特殊弹药**: 根据效果定价

价格排序也决定了子弹在切换列表中的顺序（从低到高）。

## 注意事项

1. **修改后重启**: 修改配置文件后需要重启游戏才能生效
2. **备份配置**: 修改前建议备份原始配置文件
3. **ID唯一性**: 确保每个子弹的 `id` 值唯一
4. **YAML语法**: 注意缩进使用空格，不要使用制表符
5. **价格合理性**: 价格过高或过低可能影响游戏平衡

## 故障排除

### 配置未生效

1. 检查 YAML 语法是否正确
2. 检查文件编码是否为 UTF-8
3. 查看游戏日志中的 `[FireWithMoney]` 相关信息
4. 确认配置文件路径正确

### 价格显示错误

如果子弹价格显示为默认值 (10)，说明：
- 该子弹 ID 未在配置文件中定义
- 配置文件加载失败，使用了后备配置
- 检查游戏日志确认加载状态

## 开发者信息

- 配置加载器: `YamlConfigLoader.cs`
- 配置数据类: `BulletConfigData.cs`
- 配置管理类: `BulletConfig.cs`
- 后备配置: 硬编码在 `BulletConfig._fallbackBulletTypeCosts`
